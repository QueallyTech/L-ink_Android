package com.queallytech.nfc.utils.st25dv;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

import androidx.core.app.NotificationCompat;

import com.st.st25sdk.STException;
import com.st.st25sdk.STLog;
import com.st.st25sdk.command.Iso14443aCommand;
import com.st.st25sdk.command.Iso15693Command;
import com.st.st25sdk.command.Iso15693CustomCommand;
import com.st.st25sdk.type5.st25dv.ST25DVDynRegisterEh;
import com.st.st25sdk.type5.st25dv.ST25DVTag;

import org.opencv.core.Mat;

import java.util.Arrays;

public class ST25DVTransferTaskEpd implements Runnable {
    private static final String TAG = "ST25DVTransferTaskEpd";
    private Mat epd_image;
    private byte[] frame = {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 63, -8, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 63, -8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 63, -8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -8, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -4, 1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -1, -1, -1, -1, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -4, 0, 0, 0, 0, 0, 63, Iso14443aCommand.ISO14443A_CMD_RATS, 15, Byte.MIN_VALUE, 63, -1, -1, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -4, 0, 0, 0, 0, 0, 63, Iso14443aCommand.ISO14443A_CMD_RATS, 15, Byte.MIN_VALUE, 63, -1, -1, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -4, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, Byte.MIN_VALUE, 63, -1, -1, 0, 63, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -4, 0, 0, 0, 0, 0, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 63, -1, -1, 0, 31, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -4, 0, 0, 0, 0, 0, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 63, -1, -1, Byte.MIN_VALUE, 31, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, 0, 0, 0, 0, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 63, -1, -1, Byte.MIN_VALUE, 31, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, 0, 0, 0, 0, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 31, -1, -1, 0, 15, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, Byte.MAX_VALUE, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 16, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -5, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, -2, 0, Byte.MAX_VALUE, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, -8, 0, 0, 16, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -7, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -2, 0, Byte.MAX_VALUE, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, -8, 0, 0, 16, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -7, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, 0, Byte.MAX_VALUE, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, -8, 0, 0, 16, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -8, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, 0, Byte.MAX_VALUE, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 3, -1, -1, -8, 0, 0, 8, 0, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -8, 112, 7, -1, 0, Byte.MAX_VALUE, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 3, -1, -1, -8, 0, 0, 8, 0, 0, 0, 0, 0, 7, -1, -1, -1,
        -1, -1, -8, 112, 7, -1, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 3, -1, -1, -4, 3, Iso14443aCommand.ISO14443A_CMD_RATS, 8, 0, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -8, 56, 7, -1, 0, 63, -8, 3, -1, -1, -4, 3, Iso14443aCommand.ISO14443A_CMD_RATS, 8, 0, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -8, 56, 3, -1, 0, 0, 0, 0, 0, 31, -4, 3, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 8, 0, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -8, 24, 3, -1, Byte.MIN_VALUE, 0, 0, 0, 0, 31, -4, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -1, -1, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 24, 3, -1, Byte.MIN_VALUE, 0, 0, 0, 0, 31, -4, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -1, -1, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 8, 3, -1, Byte.MIN_VALUE, 0, 0, 0, 0, 15, -4, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -1, -1, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 8, 3, -97, Byte.MIN_VALUE, 0, 0, 0, 0, 15, -2, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -1, -1, -1, -1, -1, -1, -1, -8, 4, 1, -113, Byte.MIN_VALUE, 0, 0, 0, 0, 15, -2, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 3, -1, -1, -1, -1, -1, -1, -1, -8, 0, 1, 7, Byte.MIN_VALUE, 0, 0, 0, 0, 15, -2, 0, -8, 7, Byte.MIN_VALUE, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -4, 0, 1, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 15, -2, 0, -8, 7, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -2, 0, 0, 1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -4, 0, -1, -1, -2, 0, -8, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -1, 0, 0, 0, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -4, 0, -1, -1, -2, 0, -8, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -1, 0, 0, 0, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -2, 0, -1, -1, -1, 0, -8, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 0, 1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -2, 0, -1, -1, -1, 0, -4, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, -1, -1, -1, 0, 124, 3, Iso14443aCommand.ISO14443A_CMD_RATS, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 3, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, Byte.MAX_VALUE, -1, -1, 0, 0, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 0, 7, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, Byte.MAX_VALUE, -1, -1, 0, 0, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 1, -8, 0, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 0, 15, 96, 7, -2, 0, Byte.MAX_VALUE, -1, -1, Byte.MIN_VALUE, 0, 1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 1, -8, 1, -1, -1, -1, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 31, 32, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 0, 1, -8, 0, -8, 0, -1, -1, -1, -1, -1, -1, -1, -1, -8, 0, 63, 0, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 0, 1, -8, 0, -4, 0, -1, -1, -1, -1, -1, -1, -1, -1, -8, 0, Byte.MAX_VALUE, 0, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 0, 1, -4, 0, 124, 0, -1, -1, -1, -1, -1, -1, -1, -1, -4, 0, Byte.MAX_VALUE, 0, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 0, 0, -2, 0, Iso15693Command.ISO15693_CMD_EXTENDED_GET_MULTIPLE_BLOCK_SEC_STATUS, 0, -1, -1, -1, -1, -1, -1, -1, -1, -4, 0, Byte.MAX_VALUE, 0, 0, 0, 0, 0, 1, -1, Byte.MIN_VALUE, 0, 0, -1, 0, 28, 0, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, 126, 0, 0, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, -1, 0, 31, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 0, 62, 0, 0, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 62, 0, -1, Byte.MIN_VALUE, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, 0, 0, 0, 0, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, 0, -1, Byte.MIN_VALUE, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 31, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, 0, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, 0, 0, 0, 0, 3, -1, Byte.MIN_VALUE, 31, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, 0, 64, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, 0, 0, 0, 0, 1, -1, Byte.MIN_VALUE, 31, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, 0, 64, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, 0, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 31, 0, 64, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 31, Byte.MIN_VALUE, 96, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, Byte.MIN_VALUE, 96, 0, 0, 0, 0, 0, Byte.MAX_VALUE, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 0, 0, 0, 1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, Byte.MIN_VALUE, 32, 0, 0, 0, 0, 0, 63, -1, -1, -1, -1, -1, Byte.MIN_VALUE, 0, 0, 32, 0, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, Byte.MIN_VALUE, 32, 0, 0, 0, 0, 0, 63, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, Byte.MIN_VALUE, 63, -2, 0, 31, -1, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 31, -8, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, Byte.MIN_VALUE, 63, -1, 0, 31, -1, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -8, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 15, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 63, -1, Byte.MIN_VALUE, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -4, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 56, 3, Byte.MIN_VALUE, 7, -1, Byte.MIN_VALUE, 63, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, 0, 0, 0, 0, 63, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 24, 3, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 7, -1, Byte.MIN_VALUE, 63, -1, -1, -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -2, 0, 0, 0, 0, 0, 31, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 24, 1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 3, -1, Byte.MIN_VALUE, 31, -1, -1,
        -1, -1, -1, -1, Iso14443aCommand.ISO14443A_CMD_RATS, 15, -1, 0, 0, 0, 0, 0, 31, -8, 0, 0, 24, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 3, -1, Byte.MIN_VALUE, 31, -1, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 7, -1, Byte.MIN_VALUE, 31, -4, 7, -1, -1, -8, 0, 0, 24, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 31, -1, Byte.MIN_VALUE, 31, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 7, -1, Byte.MIN_VALUE, 31, -2, 3, -1, -1, -8, 0, 0, 28, 0, 0, 0, 0, 0, 31, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 7, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -4, 0, -1, -1, -8, 0, 0, 28, 0, 0, 0, 0, 0, 31, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 15, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -4, 0, Byte.MAX_VALUE, -1, -8, 0, 0, 12, 0, 0, 0, 0, 0, 31, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 7, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -8, 0, Byte.MAX_VALUE, -1, -8, 0, 0, 12, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 15, Iso14443aCommand.ISO14443A_CMD_RATS, 7, -8, 0, -1, -1, -4, 0, 0, 12, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 15, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 3, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, -1, -1, -4, 0, 0, 12, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 15, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 3, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 1, -1, -1, -1, -1, -1, -2, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, ST25DVDynRegisterEh.RFU_ON_BIT_MASK, 0, 0, 15, -8, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 1, -1, -1, -1, -1, -1, -2, 0, 0, 0, 0, 0, 15, -1, -1, -1, -1, -1, -1, 0, 0, 15, -8, 1, Iso14443aCommand.ISO14443A_CMD_RATS, 3, -1, -1, -1, -1, -1, -2, 0, 0, 0, 0, 0, 7, -1, -1, -1, -1, -1, -1, -1, Iso15693CustomCommand.ISO15693_CUSTOM_ST_CMD_FAST_READ_SINGLE_BLOCK, 15, -4, 0, Iso14443aCommand.ISO14443A_CMD_RATS, 3, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -113, -4, 3, -4, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, 63, -1, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -49, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1
    };
    private byte[] image_tmp = new byte[40000];
    private Handler mHandler;
    private ST25DVTag mST25DVTag;

    public ST25DVTransferTaskEpd(ST25DVTag tag, Mat epd_image, Handler h) {
        this.mST25DVTag = tag;
        this.epd_image = epd_image;
        this.mHandler = h;
    }

    @Override // java.lang.Runnable
    @SuppressLint({"LongLogTag"})
    public void run() {
        try {
            while (this.mST25DVTag.hasRFPutMsg(true)) {
                sleep_in_ms(100);
            }
            for (int j = 0; j < 200; j++) {
                for (int k = 0; k < 200; k++) {
                    if (this.epd_image.get(j, k)[0] > 100.0d) {
                        this.image_tmp[(j * 200) + k] = 1;
                    } else {
                        this.image_tmp[(j * 200) + k] = 0;
                    }
                }
            }
            for (int i = 0; i < 5000; i++) {
                byte b = 0;
                for (int j2 = 0; j2 < 8; j2++) {
                    b = (byte) (((this.image_tmp[(i * 8) + j2] > 0 ? 1 : 0) << (7 - j2)) | b);
                }
                this.frame[i] = b;
            }
            for (int n_frame = 0; n_frame < 25; n_frame++) {
                this.mST25DVTag.writeMailboxMessage(200, Arrays.copyOfRange(this.frame, n_frame * 200, (n_frame + 1) * 200), (byte) 2);
                Message msg = new Message();
                msg.what = 1;
                Bundle b2 = new Bundle();
                b2.putFloat(NotificationCompat.CATEGORY_PROGRESS, n_frame / 25.0f);
                msg.setData(b2);
                this.mHandler.sendMessage(msg);
                sleep_in_ms(20);
                this.mST25DVTag.resetMailbox();
            }
            Message msg2 = new Message();
            msg2.what = 2;
            this.mHandler.sendMessage(msg2);
        } catch (STException e) {
            e.printStackTrace();
            Log.d(TAG, "startTranfer: " + e.getMessage());
        }
    }

    private void sleep_in_ms(int time_in_ms) {
        try {
            Thread.sleep(time_in_ms);
        } catch (InterruptedException e) {
            STLog.e(e.getMessage());
        }
    }
}